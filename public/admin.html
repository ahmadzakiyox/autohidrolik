<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - AUTOHIDROLIK</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Poppins', sans-serif; }
        /* Style untuk menyembunyikan/menampilkan konten tab */
        [data-tab-content] { display: none; }
        .active[data-tab-content] { display: block; }
        /* Style kustom kecil untuk Dropdown Aksi di tabel agar tidak terpotong */
        .action-button-group { position: relative; }
        .action-dropdown { position: absolute; right: 0; z-index: 10; }
    </style>
</head>
<body class="bg-gray-50">
    <div class="flex h-screen bg-gray-100">
        <aside class="w-64 flex-shrink-0 bg-gray-800 text-gray-300 flex flex-col">
            <div class="h-16 flex items-center justify-center border-b border-gray-700">
                <h1 class="text-xl font-bold text-white">AUTOHIDROLIK</h1>
            </div>
            <nav class="flex-grow mt-4">
                <a href="/Admin-Dashboard" class="flex items-center px-6 py-3 text-white bg-gray-700/50">
                    <i class="bi bi-grid-1x2-fill w-6"></i>
                    <span class="ml-4">Dashboard</span>
                </a>
                <a href="/Server-Status" class="flex items-center px-6 py-3 hover:bg-gray-700/50 transition">
                    <i class="bi bi-hdd-stack w-6"></i>
                    <span class="ml-4">Status Server</span>
                </a>
                <a href="/Scanner-QRCODE" class="flex items-center px-6 py-3 hover:bg-gray-700/50 transition">
                    <i class="bi bi-qr-code-scan w-6"></i>
                    <span class="ml-4">Scanner</span>
                </a>
            </nav>
            <div class="p-4 border-t border-gray-700">
                 <button id="logout-button" class="w-full flex items-center justify-center px-4 py-2 text-red-300 hover:bg-red-500 hover:text-white rounded-md transition">
                    <i class="bi bi-box-arrow-right w-6"></i>
                    <span class="ml-4">Logout</span>
                </button>
            </div>
        </aside>

        <div class="flex-1 flex flex-col overflow-hidden">
            <header class="h-16 bg-white border-b border-gray-200 flex items-center justify-between px-6 flex-shrink-0">
                <h2 class="text-xl font-semibold text-gray-800">Admin Dashboard</h2>
            </header>
            <main class="flex-1 overflow-x-hidden overflow-y-auto bg-gray-100 p-6">
                <div id="alert-placeholder"></div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6">
                    <div class="bg-white p-6 rounded-lg shadow-sm flex items-center"><i class="bi bi-people-fill text-3xl text-indigo-500 bg-indigo-100 p-3 rounded-full mr-4"></i><div><p class="text-sm text-gray-500">Total Member Aktif</p><p class="text-2xl font-bold" id="member-count">0</p></div></div>
                    <div class="bg-white p-6 rounded-lg shadow-sm flex items-center"><i class="bi bi-eye-fill text-3xl text-sky-500 bg-sky-100 p-3 rounded-full mr-4"></i><div><p class="text-sm text-gray-500">Total Pengunjung</p><p class="text-2xl font-bold" id="visitor-count">0</p></div></div>
                    <div class="bg-white p-6 rounded-lg shadow-sm flex items-center"><i class="bi bi-cash-coin text-3xl text-emerald-500 bg-emerald-100 p-3 rounded-full mr-4"></i><div class="flex-grow"><p class="text-sm text-gray-500">Total Transaksi</p><p class="text-2xl font-bold" id="transaction-total">Rp 0</p></div><button class="text-gray-400 hover:text-gray-600" data-bs-toggle="modal" data-bs-target="#editTransactionModal" title="Koreksi Pemasukan"><i class="bi bi-pencil-square"></i></button></div>
                </div>

                <div class="bg-white rounded-lg shadow-sm">
                    <div class="p-4 border-b flex justify-between items-center">
                        <h3 class="text-lg font-semibold">Manajemen Pengguna</h3>
                        <div class="flex space-x-2">
                           <button id="download-data-btn" class="px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-lg hover:bg-green-700 flex items-center"><i class="bi bi-download mr-2"></i>Download</button>
                           <button data-bs-toggle="modal" data-bs-target="#addUserModal" class="px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-lg hover:bg-indigo-700 flex items-center"><i class="bi bi-plus-circle mr-2"></i>Tambah User</button>
                        </div>
                    </div>
                    
                    <div class="px-4 border-b">
                        <nav class="flex space-x-4" id="tabs">
                             <button data-tab-target="#pending-tab" class="tab active text-indigo-600 border-b-2 border-indigo-600 py-3 px-1 text-sm font-medium">Menunggu Konfirmasi</button>
                             <button data-tab-target="#active-tab" class="tab text-gray-500 hover:text-indigo-600 py-3 px-1 text-sm font-medium">Member Aktif</button>
                             <button data-tab-target="#expired-tab" class="tab text-gray-500 hover:text-indigo-600 py-3 px-1 text-sm font-medium">Member Kedaluwarsa</button>
                             <button data-tab-target="#non-member-tab" class="tab text-gray-500 hover:text-indigo-600 py-3 px-1 text-sm font-medium">Non-Member</button>
                             <button data-tab-target="#reviews-tab" class="tab text-gray-500 hover:text-indigo-600 py-3 px-1 text-sm font-medium">Ulasan</button>
                        </nav>
                    </div>

                    <div class="p-4">
                        <div id="pending-tab" data-tab-content class="active"><div class="overflow-x-auto"><table class="w-full text-sm text-left text-gray-600"><thead class="text-xs text-gray-700 uppercase bg-gray-50"><tr><th class="px-6 py-3">Username</th><th class="px-6 py-3">No. WhatsApp</th><th class="px-6 py-3">Paket</th><th class="px-6 py-3">Tgl Beli</th><th class="px-6 py-3 text-center">Aksi</th></tr></thead><tbody id="pending-payment-table-body" class="divide-y"></tbody></table></div></div>
                        <div id="active-tab" data-tab-content><div class="overflow-x-auto"><table class="w-full text-sm text-left text-gray-600"><thead class="text-xs text-gray-700 uppercase bg-gray-50"><tr><th class="px-6 py-3">No.</th><th class="px-6 py-3">Username</th><th class="px-6 py-3">Email</th><th class="px-6 py-3">No. WhatsApp</th><th class="px-6 py-3 text-center">Jml Paket</th><th class="px-6 py-3 text-center">Aksi</th></tr></thead><tbody id="member-table-body" class="divide-y"></tbody></table></div></div>
                        <div id="expired-tab" data-tab-content><div class="overflow-x-auto"><table class="w-full text-sm text-left text-gray-600"><thead class="text-xs text-gray-700 uppercase bg-gray-50"><tr><th class="px-6 py-3">No.</th><th class="px-6 py-3">Username</th><th class="px-6 py-3">Paket</th><th class="px-6 py-3">Tgl Kedaluwarsa</th><th class="px-6 py-3 text-center">Aksi</th></tr></thead><tbody id="expired-member-table-body" class="divide-y"></tbody></table></div></div>
                        <div id="non-member-tab" data-tab-content><div class="overflow-x-auto"><table class="w-full text-sm text-left text-gray-600"><thead class="text-xs text-gray-700 uppercase bg-gray-50"><tr><th class="px-6 py-3">No.</th><th class="px-6 py-3">Username</th><th class="px-6 py-3">Email</th><th class="px-6 py-3">No. WhatsApp</th><th class="px-6 py-3 text-center">Aksi</th></tr></thead><tbody id="non-member-table-body" class="divide-y"></tbody></table></div></div>
                        <div id="reviews-tab" data-tab-content><div class="overflow-x-auto"><table class="w-full text-sm text-left text-gray-600"><thead class="text-xs text-gray-700 uppercase bg-gray-50"><tr><th class="px-6 py-3">Username</th><th class="px-6 py-3">Rating</th><th class="px-6 py-3 w-1/2">Ulasan</th><th class="px-6 py-3 text-center">Aksi</th></tr></thead><tbody id="review-table-body" class="divide-y"></tbody></table></div></div>
                    </div>
                </div>
            </main>
        </div>
    </div>
    
    <div class="modal fade" id="addUserModal" tabindex="-1">...</div>
    <div class="modal fade" id="editUserModal" tabindex="-1">...</div>
    <div class="modal fade" id="setPackageModal" tabindex="-1">...</div>
    <div class="modal fade" id="viewPackagesModal" tabindex="-1">...</div>
    <div class="modal fade" id="editReviewModal" tabindex="-1">...</div>
    <div class="modal fade" id="resetPasswordModal" tabindex="-1">...</div>
    <div class="modal fade" id="editTransactionModal" tabindex="-1">...</div>
    <div class="modal fade" id="editOrderModal" tabindex="-1">...</div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/davidshimjs-qrcodejs@0.0.2/qrcode.min.js"></script>
    <script src="/js/admin.js"></script>

    <script>
        // Script untuk fungsionalitas Tab
        const tabs = document.querySelectorAll('.tab');
        const tabContents = document.querySelectorAll('[data-tab-content]');
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const target = document.querySelector(tab.dataset.tabTarget);
                tabContents.forEach(tc => tc.classList.remove('active'));
                tabs.forEach(t => {
                    t.classList.remove('active', 'text-indigo-600', 'border-indigo-600');
                    t.classList.add('text-gray-500');
                });
                tab.classList.add('active', 'text-indigo-600', 'border-b-2', 'border-indigo-600');
                target.classList.add('active');
            });
        });
    </script>
</body>
</html>
